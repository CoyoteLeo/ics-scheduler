!function(){"use strict";var r="undefined"==typeof window?global:window;if("function"!=typeof r.require){var n={},e={},t={},i={}.hasOwnProperty,a=/^\.\.?(\/|$)/,o=function(r,n){for(var e,t=[],i=(a.test(n)?r+"/"+n:n).split("/"),o=0,u=i.length;o<u;o++)e=i[o],".."===e?t.pop():"."!==e&&""!==e&&t.push(e);return t.join("/")},u=function(r){return r.split("/").slice(0,-1).join("/")},c=function(n){return function(e){var t=o(u(n),e);return r.require(t,n)}},f=function(r,n){var t=null;t=A&&A.createHot(r);var i={id:r,exports:{},hot:t};return e[r]=i,n(i.exports,c(r),i),i.exports},l=function(r){return t[r]?l(t[r]):r},s=function(r,n){return l(o(u(r),n))},p=function(r,t){null==t&&(t="/");var a=l(r);if(i.call(e,a))return e[a].exports;if(i.call(n,a))return f(a,n[a]);throw new Error("Cannot find module '"+r+"' from '"+t+"'")};p.alias=function(r,n){t[n]=r};var d=/\.[^.\/]+$/,T=/\/index(\.[^\/]+)?$/,E=function(r){if(d.test(r)){var n=r.replace(d,"");i.call(t,n)&&t[n].replace(d,"")!==n+"/index"||(t[n]=r)}if(T.test(r)){var e=r.replace(T,"");i.call(t,e)||(t[e]=r)}};p.register=p.define=function(r,t){if("object"==typeof r)for(var a in r)i.call(r,a)&&p.register(a,r[a]);else n[r]=t,delete e[r],E(r)},p.list=function(){var r=[];for(var e in n)i.call(n,e)&&r.push(e);return r};var A=r._hmr&&new r._hmr(s,p,n,e);p._cache=e,p.hmr=A&&A.wrap,p.brunch=!0,r.require=p}}(),function(){var r;window;require.register("app.js",function(r,n,e){"use strict";function t(r){return r&&r.__esModule?r:{"default":r}}function i(r){if(Array.isArray(r)){for(var n=0,e=Array(r.length);n<r.length;n++)e[n]=r[n];return e}return Array.from(r)}var a=n("jquery"),o=t(a);n("bootstrap");var u=n("./lib/utils");(0,o["default"])(document).ready(function(){(0,o["default"])("form").submit(function(r){r.preventDefault();var n=[],e=(0,o["default"])("form #raw-input-textarea").val().match(/[A-Z\d]{9}/g),t=0,a=e.length;e.forEach(function(r){o["default"].getJSON("./data/ntust/"+r+".json",function(r){if("undefined"!=typeof r?(n=[].concat(i(n),[r]),t+=1):a-=1,t==a){var e=(0,u.icsGenerate)(n);o["default"].post("https://api.github.com/gists",JSON.stringify({files:{"calendar.ics":{content:e}}}),function(r){var n=r.files["calendar.ics"].raw_url;(0,o["default"])("#ics-anchor").attr("href",n),(0,o["default"])("#download-group").toggleClass("hidden")})}})})})})}),require.register("lib/utils.js",function(r,n,e){"use strict";function t(r,n){return r.setDate(r.getDate()+(n+(7-r.getDay()))%7),r}function i(r){var n={1:"MO",2:"TU",3:"WE",4:"TH",5:"FR",6:"SA",7:"SU"},e=r.map(function(r){return Array.isArray(r.periods)&&r.periods.map(function(e){var i=e.time.split("-").map(function(r){return t(new Date(o+"T"+r+":00+08:00"),e.day)}),u=a(i,2),c=u[0],f=u[1],l=[c,f].map(function(r){return r.toISOString().slice(0,19).replace(/[-:]/g,"")}),s=a(l,2),p=s[0],d=s[1];return"BEGIN:VEVENT\nDTSTART;TZID=UTC:"+p+"\nDTEND;TZID=UTC:"+d+"\nRRULE:FREQ=WEEKLY;COUNT=18;BYDAY="+n[t(c,e.day).getDay()]+"\nSUMMARY:"+r.name+"\nLOCATION:"+e.location+"\nDESCRIPTION:授課教師:"+r.lecturer+"\nEND:VEVENT"}).join("\n")}).join("\n");return("BEGIN:VCALENDAR\nVERSION:2.0\nPRODID:yukaii.tw\nCALSCALE:GREGORIAN\nMETHOD:PUBLISH\nX-WR-CALNAME:課程表\nX-WR-TIMEZONE:Asia/Taipei\nX-WR-CALDESC:\nBEGIN:VTIMEZONE\nTZID:Asia/Taipei\nX-LIC-LOCATION:Asia/Taipei\nBEGIN:STANDARD\nTZOFFSETFROM:+0800\nTZOFFSETTO:+0800\nTZNAME:CST\nDTSTART:19700101T000000\nEND:STANDARD\nEND:VTIMEZONE\n"+e+"\nEND:VCALENDAR").replace(/\n/g,"\r\n")}Object.defineProperty(r,"__esModule",{value:!0});var a=function(){function r(r,n){var e=[],t=!0,i=!1,a=void 0;try{for(var o,u=r[Symbol.iterator]();!(t=(o=u.next()).done)&&(e.push(o.value),!n||e.length!==n);t=!0);}catch(c){i=!0,a=c}finally{try{!t&&u["return"]&&u["return"]()}finally{if(i)throw a}}return e}return function(n,e){if(Array.isArray(n))return n;if(Symbol.iterator in Object(n))return r(n,e);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}();r.icsGenerate=i;var o="2016-09-12"}),require.alias("process/browser.js","process"),r=require("process"),require.register("___globals___",function(r,n,e){window.$=n("jquery"),window.jQuery=n("jquery"),window.Tether=n("tether")})}(),require("___globals___");