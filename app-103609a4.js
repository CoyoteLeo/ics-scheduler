!function(){"use strict";var e="undefined"==typeof window?global:window;if("function"!=typeof e.require){var t={},r={},n={},a={}.hasOwnProperty,i=/^\.\.?(\/|$)/,u=function(e,t){for(var r,n=[],a=(i.test(t)?e+"/"+t:t).split("/"),u=0,o=a.length;u<o;u++)r=a[u],".."===r?n.pop():"."!==r&&""!==r&&n.push(r);return n.join("/")},o=function(e){return e.split("/").slice(0,-1).join("/")},l=function(t){return function(r){var n=u(o(t),r);return e.require(n,t)}},s=function(e,t){var n=null;n=y&&y.createHot(e);var a={id:e,exports:{},hot:n};return r[e]=a,t(a.exports,l(e),a),a.exports},c=function(e){return n[e]?c(n[e]):e},f=function(e,t){return c(u(o(e),t))},d=function(e,n){null==n&&(n="/");var i=c(e);if(a.call(r,i))return r[i].exports;if(a.call(t,i))return s(i,t[i]);throw new Error("Cannot find module '"+e+"' from '"+n+"'")};d.alias=function(e,t){n[t]=e};var v=/\.[^.\/]+$/,p=/\/index(\.[^\/]+)?$/,h=function(e){if(v.test(e)){var t=e.replace(v,"");a.call(n,t)&&n[t].replace(v,"")!==t+"/index"||(n[t]=e)}if(p.test(e)){var r=e.replace(p,"");a.call(n,r)||(n[r]=e)}};d.register=d.define=function(e,n){if("object"==typeof e)for(var i in e)a.call(e,i)&&d.register(i,e[i]);else t[e]=n,delete r[e],h(e)},d.list=function(){var e=[];for(var r in t)a.call(t,r)&&e.push(r);return e};var y=e._hmr&&new e._hmr(f,d,t,r);d._cache=r,d.hmr=y&&y.wrap,d.brunch=!0,e.require=d}}(),function(){var e;window;require.register("app.js",function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{"default":e}}function a(e){if(Array.isArray(e)){for(var t=0,r=Array(e.length);t<e.length;t++)r[t]=e[t];return r}return Array.from(e)}var i=function(){function e(e,t){var r=[],n=!0,a=!1,i=void 0;try{for(var u,o=e[Symbol.iterator]();!(n=(u=o.next()).done)&&(r.push(u.value),!t||r.length!==t);n=!0);}catch(l){a=!0,i=l}finally{try{!n&&o["return"]&&o["return"]()}finally{if(a)throw i}}return r}return function(t,r){if(Array.isArray(t))return t;if(Symbol.iterator in Object(t))return e(t,r);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),u=t("jquery"),o=n(u);t("bootstrap");var l=t("./lib/utils");(0,o["default"])(document).ready(function(){(0,o["default"])("form").submit(function(e){e.preventDefault(),(0,o["default"])("#alternative-download-link").addClass("hidden"),(0,o["default"])("#ics-anchor button").attr("disabled","").removeClass("btn-success").removeClass("btn-danger").text("請稍等");var t=[],r=(0,o["default"])("form #raw-input-textarea").val().match(/[A-Z\d]{9}/g);if(!r)return void(0,o["default"])("#ics-anchor button").addClass("btn-danger").text("課程代碼錯誤");var n=(0,o["default"])("#school-value").attr("value"),u=(0,o["default"])("#semester-value").attr("value"),s=u.split("-"),c=i(s,2),f=c[0],d=c[1],v=0,p=r.length;r.forEach(function(e){o["default"].getJSON("./data/"+u+"/"+n+"/"+e+".json",function(e){if("undefined"!=typeof e?(t=[].concat(a(t),[e]),v+=1):p-=1,v==p){var r=(0,l.icsGenerate)(t,f,d);o["default"].post("https://api.github.com/gists",JSON.stringify({files:{"calendar.ics":{content:r}}}),function(e){var t=e.files["calendar.ics"].raw_url;(0,o["default"])("#ics-anchor").attr("href",t),(0,o["default"])("#ics-anchor button").addClass("btn-success").removeAttr("disabled").text("下載"),(0,o["default"])("#alternative-download-link").removeClass("hidden").attr("href",t)})}})})}),(0,o["default"])("#school-dropdown .dropdown-menu a").click(function(e){e.preventDefault(),(0,o["default"])("#school-value").text((0,o["default"])(this).attr("value").toUpperCase()).attr("value",(0,o["default"])(this).attr("value"))}),(0,o["default"])("#semester-dropdown .dropdown-menu a").click(function(e){e.preventDefault();var t=(0,o["default"])(this).attr("value").split("-"),r=i(t,2),n=r[0],a=r[1];(0,o["default"])("#semester-value").text(""+(n-1911)+a).attr("value",(0,o["default"])(this).attr("value"))})})}),require.register("lib/utils.js",function(e,t,r){"use strict";function n(e,t){return e.setDate(e.getDate()+(t+(7-e.getDay()))%7),e}function a(e,t,r){var a={1:"MO",2:"TU",3:"WE",4:"TH",5:"FR",6:"SA",7:"SU"},o=e.map(function(e){return Array.isArray(e.periods)&&e.periods.map(function(o){var l=o.time.split("-").map(function(e){return n(new Date(u[t+"-"+r]+"T"+e+":00+08:00"),o.day)}),s=i(l,2),c=s[0],f=s[1],d=[c,f].map(function(e){return e.toISOString().slice(0,19).replace(/[-:]/g,"")}),v=i(d,2),p=v[0],h=v[1];return"BEGIN:VEVENT\nDTSTART;TZID=UTC:"+p+"\nDTEND;TZID=UTC:"+h+"\nRRULE:FREQ=WEEKLY;COUNT=18;BYDAY="+a[n(c,o.day).getDay()]+"\nSUMMARY:"+e.name+"\nLOCATION:"+o.location+"\nDESCRIPTION:授課教師:"+e.lecturer+"; 課程代碼:"+e.code+"\nEND:VEVENT"}).join("\n")}).join("\n");return("BEGIN:VCALENDAR\nVERSION:2.0\nPRODID:yukaii.tw\nCALSCALE:GREGORIAN\nMETHOD:PUBLISH\nX-WR-CALNAME:課程表\nX-WR-TIMEZONE:Asia/Taipei\nX-WR-CALDESC:\nBEGIN:VTIMEZONE\nTZID:Asia/Taipei\nX-LIC-LOCATION:Asia/Taipei\nBEGIN:STANDARD\nTZOFFSETFROM:+0800\nTZOFFSETTO:+0800\nTZNAME:CST\nDTSTART:19700101T000000\nEND:STANDARD\nEND:VTIMEZONE\n"+o+"\nEND:VCALENDAR").replace(/\n/g,"\r\n")}Object.defineProperty(e,"__esModule",{value:!0});var i=function(){function e(e,t){var r=[],n=!0,a=!1,i=void 0;try{for(var u,o=e[Symbol.iterator]();!(n=(u=o.next()).done)&&(r.push(u.value),!t||r.length!==t);n=!0);}catch(l){a=!0,i=l}finally{try{!n&&o["return"]&&o["return"]()}finally{if(a)throw i}}return r}return function(t,r){if(Array.isArray(t))return t;if(Symbol.iterator in Object(t))return e(t,r);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}();e.icsGenerate=a;var u={"2016-1":"2016-09-12","2016-2":"2017-02-20"}}),require.alias("process/browser.js","process"),e=require("process"),require.register("___globals___",function(e,t,r){window.$=t("jquery"),window.jQuery=t("jquery"),window.Tether=t("tether")})}(),require("___globals___");