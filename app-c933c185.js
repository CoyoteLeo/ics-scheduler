!function(){"use strict";var r="undefined"==typeof window?global:window;if("function"!=typeof r.require){var e={},n={},t={},a={}.hasOwnProperty,i=/^\.\.?(\/|$)/,o=function(r,e){for(var n,t=[],a=(i.test(e)?r+"/"+e:e).split("/"),o=0,u=a.length;o<u;o++)n=a[o],".."===n?t.pop():"."!==n&&""!==n&&t.push(n);return t.join("/")},u=function(r){return r.split("/").slice(0,-1).join("/")},s=function(e){return function(n){var t=o(u(e),n);return r.require(t,e)}},l=function(r,e){var t=null;t=E&&E.createHot(r);var a={id:r,exports:{},hot:t};return n[r]=a,e(a.exports,s(r),a),a.exports},c=function(r){return t[r]?c(t[r]):r},f=function(r,e){return c(o(u(r),e))},d=function(r,t){null==t&&(t="/");var i=c(r);if(a.call(n,i))return n[i].exports;if(a.call(e,i))return l(i,e[i]);throw new Error("Cannot find module '"+r+"' from '"+t+"'")};d.alias=function(r,e){t[e]=r};var p=/\.[^.\/]+$/,v=/\/index(\.[^\/]+)?$/,T=function(r){if(p.test(r)){var e=r.replace(p,"");a.call(t,e)&&t[e].replace(p,"")!==e+"/index"||(t[e]=r)}if(v.test(r)){var n=r.replace(v,"");a.call(t,n)||(t[n]=r)}};d.register=d.define=function(r,t){if("object"==typeof r)for(var i in r)a.call(r,i)&&d.register(i,r[i]);else e[r]=t,delete n[r],T(r)},d.list=function(){var r=[];for(var n in e)a.call(e,n)&&r.push(n);return r};var E=r._hmr&&new r._hmr(f,d,e,n);d._cache=n,d.hmr=E&&E.wrap,d.brunch=!0,r.require=d}}(),function(){var r;window;require.register("app.js",function(r,e,n){"use strict";function t(r){return r&&r.__esModule?r:{"default":r}}function a(r){if(Array.isArray(r)){for(var e=0,n=Array(r.length);e<r.length;e++)n[e]=r[e];return n}return Array.from(r)}var i=e("jquery"),o=t(i);e("bootstrap");var u=e("./lib/utils");(0,o["default"])(document).ready(function(){(0,o["default"])("form").submit(function(r){r.preventDefault(),(0,o["default"])("#alternative-download-link").addClass("hidden"),(0,o["default"])("#ics-anchor button").attr("disabled","").removeClass("btn-success").removeClass("btn-danger").text("請稍等");var e=[],n=(0,o["default"])("form #raw-input-textarea").val().match(/[A-Z\d]{9}/g);if(!n)return void(0,o["default"])("#ics-anchor button").addClass("btn-danger").text("課程代碼錯誤");var t=0,i=n.length;n.forEach(function(r){o["default"].getJSON("./data/ntust/"+r+".json",function(r){if("undefined"!=typeof r?(e=[].concat(a(e),[r]),t+=1):i-=1,t==i){var n=(0,u.icsGenerate)(e);o["default"].post("https://api.github.com/gists",JSON.stringify({files:{"calendar.ics":{content:n}}}),function(r){var e=r.files["calendar.ics"].raw_url;(0,o["default"])("#ics-anchor").attr("href",e),(0,o["default"])("#ics-anchor button").addClass("btn-success").removeAttr("disabled").text("下載"),(0,o["default"])("#alternative-download-link").removeClass("hidden").attr("href",e)})}})})})})}),require.register("lib/utils.js",function(r,e,n){"use strict";function t(r,e){return r.setDate(r.getDate()+(e+(7-r.getDay()))%7),r}function a(r){var e={1:"MO",2:"TU",3:"WE",4:"TH",5:"FR",6:"SA",7:"SU"},n=r.map(function(r){return Array.isArray(r.periods)&&r.periods.map(function(n){var a=n.time.split("-").map(function(r){return t(new Date(o+"T"+r+":00+08:00"),n.day)}),u=i(a,2),s=u[0],l=u[1],c=[s,l].map(function(r){return r.toISOString().slice(0,19).replace(/[-:]/g,"")}),f=i(c,2),d=f[0],p=f[1];return"BEGIN:VEVENT\nDTSTART;TZID=UTC:"+d+"\nDTEND;TZID=UTC:"+p+"\nRRULE:FREQ=WEEKLY;COUNT=18;BYDAY="+e[t(s,n.day).getDay()]+"\nSUMMARY:"+r.name+"\nLOCATION:"+n.location+"\nDESCRIPTION:授課教師:"+r.lecturer+"\nEND:VEVENT"}).join("\n")}).join("\n");return("BEGIN:VCALENDAR\nVERSION:2.0\nPRODID:yukaii.tw\nCALSCALE:GREGORIAN\nMETHOD:PUBLISH\nX-WR-CALNAME:課程表\nX-WR-TIMEZONE:Asia/Taipei\nX-WR-CALDESC:\nBEGIN:VTIMEZONE\nTZID:Asia/Taipei\nX-LIC-LOCATION:Asia/Taipei\nBEGIN:STANDARD\nTZOFFSETFROM:+0800\nTZOFFSETTO:+0800\nTZNAME:CST\nDTSTART:19700101T000000\nEND:STANDARD\nEND:VTIMEZONE\n"+n+"\nEND:VCALENDAR").replace(/\n/g,"\r\n")}Object.defineProperty(r,"__esModule",{value:!0});var i=function(){function r(r,e){var n=[],t=!0,a=!1,i=void 0;try{for(var o,u=r[Symbol.iterator]();!(t=(o=u.next()).done)&&(n.push(o.value),!e||n.length!==e);t=!0);}catch(s){a=!0,i=s}finally{try{!t&&u["return"]&&u["return"]()}finally{if(a)throw i}}return n}return function(e,n){if(Array.isArray(e))return e;if(Symbol.iterator in Object(e))return r(e,n);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}();r.icsGenerate=a;var o="2016-09-12"}),require.alias("process/browser.js","process"),r=require("process"),require.register("___globals___",function(r,e,n){window.$=e("jquery"),window.jQuery=e("jquery"),window.Tether=e("tether")})}(),require("___globals___");