!function(){"use strict";var r="undefined"==typeof window?global:window;if("function"!=typeof r.require){var e={},n={},t={},i={}.hasOwnProperty,a=/^\.\.?(\/|$)/,u=function(r,e){for(var n,t=[],i=(a.test(e)?r+"/"+e:e).split("/"),u=0,o=i.length;u<o;u++)n=i[u],".."===n?t.pop():"."!==n&&""!==n&&t.push(n);return t.join("/")},o=function(r){return r.split("/").slice(0,-1).join("/")},s=function(e){return function(n){var t=u(o(e),n);return r.require(t,e)}},c=function(r,e){var t=null;t=v&&v.createHot(r);var i={id:r,exports:{},hot:t};return n[r]=i,e(i.exports,s(r),i),i.exports},l=function(r){return t[r]?l(t[r]):r},f=function(r,e){return l(u(o(r),e))},d=function(r,t){null==t&&(t="/");var a=l(r);if(i.call(n,a))return n[a].exports;if(i.call(e,a))return c(a,e[a]);throw new Error("Cannot find module '"+r+"' from '"+t+"'")};d.alias=function(r,e){t[e]=r};var p=/\.[^.\/]+$/,T=/\/index(\.[^\/]+)?$/,E=function(r){if(p.test(r)){var e=r.replace(p,"");i.call(t,e)&&t[e].replace(p,"")!==e+"/index"||(t[e]=r)}if(T.test(r)){var n=r.replace(T,"");i.call(t,n)||(t[n]=r)}};d.register=d.define=function(r,t){if("object"==typeof r)for(var a in r)i.call(r,a)&&d.register(a,r[a]);else e[r]=t,delete n[r],E(r)},d.list=function(){var r=[];for(var n in e)i.call(e,n)&&r.push(n);return r};var v=r._hmr&&new r._hmr(f,d,e,n);d._cache=n,d.hmr=v&&v.wrap,d.brunch=!0,r.require=d}}(),function(){var r;window;require.register("app.js",function(r,e,n){"use strict";function t(r){return r&&r.__esModule?r:{"default":r}}function i(r){if(Array.isArray(r)){for(var e=0,n=Array(r.length);e<r.length;e++)n[e]=r[e];return n}return Array.from(r)}var a=e("jquery"),u=t(a);e("bootstrap");var o=e("./lib/utils");(0,u["default"])(document).ready(function(){(0,u["default"])("form").submit(function(r){r.preventDefault(),(0,u["default"])("#ics-anchor button").attr("disabled","").removeClass("btn-success").removeClass("btn-danger").text("請稍等");var e=[],n=(0,u["default"])("form #raw-input-textarea").val().match(/[A-Z\d]{9}/g);if(!n)return void(0,u["default"])("#ics-anchor button").addClass("btn-danger").text("課程代碼錯誤");var t=0,a=n.length;n.forEach(function(r){u["default"].getJSON("./data/ntust/"+r+".json",function(r){if("undefined"!=typeof r?(e=[].concat(i(e),[r]),t+=1):a-=1,t==a){var n=(0,o.icsGenerate)(e);u["default"].post("https://api.github.com/gists",JSON.stringify({files:{"calendar.ics":{content:n}}}),function(r){var e=r.files["calendar.ics"].raw_url;(0,u["default"])("#ics-anchor").attr("href",e),(0,u["default"])("#ics-anchor button").addClass("btn-success").removeAttr("disabled").text("下載")})}})})})})}),require.register("lib/utils.js",function(r,e,n){"use strict";function t(r,e){return r.setDate(r.getDate()+(e+(7-r.getDay()))%7),r}function i(r){var e={1:"MO",2:"TU",3:"WE",4:"TH",5:"FR",6:"SA",7:"SU"},n=r.map(function(r){return Array.isArray(r.periods)&&r.periods.map(function(n){var i=n.time.split("-").map(function(r){return t(new Date(u+"T"+r+":00+08:00"),n.day)}),o=a(i,2),s=o[0],c=o[1],l=[s,c].map(function(r){return r.toISOString().slice(0,19).replace(/[-:]/g,"")}),f=a(l,2),d=f[0],p=f[1];return"BEGIN:VEVENT\nDTSTART;TZID=UTC:"+d+"\nDTEND;TZID=UTC:"+p+"\nRRULE:FREQ=WEEKLY;COUNT=18;BYDAY="+e[t(s,n.day).getDay()]+"\nSUMMARY:"+r.name+"\nLOCATION:"+n.location+"\nDESCRIPTION:授課教師:"+r.lecturer+"\nEND:VEVENT"}).join("\n")}).join("\n");return("BEGIN:VCALENDAR\nVERSION:2.0\nPRODID:yukaii.tw\nCALSCALE:GREGORIAN\nMETHOD:PUBLISH\nX-WR-CALNAME:課程表\nX-WR-TIMEZONE:Asia/Taipei\nX-WR-CALDESC:\nBEGIN:VTIMEZONE\nTZID:Asia/Taipei\nX-LIC-LOCATION:Asia/Taipei\nBEGIN:STANDARD\nTZOFFSETFROM:+0800\nTZOFFSETTO:+0800\nTZNAME:CST\nDTSTART:19700101T000000\nEND:STANDARD\nEND:VTIMEZONE\n"+n+"\nEND:VCALENDAR").replace(/\n/g,"\r\n")}Object.defineProperty(r,"__esModule",{value:!0});var a=function(){function r(r,e){var n=[],t=!0,i=!1,a=void 0;try{for(var u,o=r[Symbol.iterator]();!(t=(u=o.next()).done)&&(n.push(u.value),!e||n.length!==e);t=!0);}catch(s){i=!0,a=s}finally{try{!t&&o["return"]&&o["return"]()}finally{if(i)throw a}}return n}return function(e,n){if(Array.isArray(e))return e;if(Symbol.iterator in Object(e))return r(e,n);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}();r.icsGenerate=i;var u="2016-09-12"}),require.alias("process/browser.js","process"),r=require("process"),require.register("___globals___",function(r,e,n){window.$=e("jquery"),window.jQuery=e("jquery"),window.Tether=e("tether")})}(),require("___globals___");